!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("rpc_client",[],t):"object"==typeof exports?exports.rpc_client=t():e.rpc_client=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].e;var o=n[r]={e:{},i:r,l:!1};return e[r].call(o.e,o,o.e,t),o.l=!0,o.e}var n={};return t.m=e,t.c=n,t.p="",t(t.s=7)}([function(e,t,n){function r(e){this.send=function(t){return new Promise(function(n,r){var o=new XMLHttpRequest;o.open("POST",e,!0),o.withCredentials=!0,o.onload=function(){this.status>=200&&this.status<300?n(o.response):r({status:this.status,statusText:o.statusText})},o.onerror=function(){r({status:this.status,statusText:o.statusText})},o.send(t)})}}t.a=r},function(e,t,n){function r(e,t,n){this.send=function(r){r=t?t(r):r;var o=e.send(r);return n?n(o):o}}t.a=r},function(e,t,n){function r(e){this.send=function(t){return new Promise(function(n,r){try{var o=JSON.stringify(t);e.send(o).then(function(e){try{var t=JSON.parse(e)}catch(o){r({name:"JsonLayerError",message:o.name+": "+o.message+"\n"+e})}n(t)},r)}catch(a){r({name:"JsonLayerError",message:a.name+": "+a.message})}})}}t.a=r},function(e,t,n){function r(e,t,n,r){this.send=function(o){var a,c;if(t)for(a=0;a<o.length;a++)c=o[a],t("call["+a+"]",c[0]+"->"+c[1]+"("+(c[2]&&c[2].join(", ")||"")+")");var s=e.send(o);if(n||r){var u=new Array(s.length);for(a=0;a<s.length;a++)!function(e){u[e]=s[e].then(function(t){return n&&n("result["+e+"]",t),t},function(t){var o=r||n;throw o&&o("error["+e+"]",t),t})}(a);return u}return s}}t.a=r},function(e,t,n){function r(e){if("object"!=typeof e)throw{name:"RpcProtocolError",message:"Bad response format: object expected, got "+typeof e};if(void 0===e.status)throw{name:"RpcProtocolError",message:"no status"};if(void 0===e.result)throw{name:"RpcProtocolError",message:"no result"};if(!e.status)throw{name:e.result.type||"UnknownError",message:e.result.message||""};return e.result}function o(e){var t=1;this.send=function(n){var o,a,c=new Array(n.length),s=[];if(n.length>0){var u=new Array(n.length);for(o=0;o<n.length;o++)a=n[o],u[o]={service:a[0],method:a[1]},a[2]&&a[2].length>0&&(u[o].parameters=a[2]),c[o]=new Promise(function(e,t){s.push([e,t])});var i={id:t++,calls:u};e.send(i).then(function(e){try{var t=r(e);for(o=0;o<s.length;o++)try{var n=r(t[o]);s[o][0](n)}catch(a){s[o][1](a)}}catch(a){for(o=0;o<s.length;o++)s[o][1](a)}},function(e){for(o=0;o<s.length;o++)s[o][1](e)})}return c}}t.a=o},function(e,t,n){function r(e){var t=this;t.call=function(t,n,r){return e.send([[t,n,r]])[0]},t.batch=function(t){var n=new o.a,a=new r(n);return t(a),n.flush(e)}}var o=n(6);t.a=r},function(e,t,n){function r(){var e,t=this,n=[],r=[];t.send=function(t){var o=new Array(t.length);for(n=n.concat(t),e=0;e<t.length;e++)o[e]=new Promise(function(e,t){r.push([e,t])});return o},t.flush=function(e){for(var t=e.send(n),o=new Array(t.length),a=0;a<r.length;a++)o[a]=t[a].then(r[a][0],r[1]);return o}}t.a=r},function(e,t,n){var r=n(0),o=n(3),a=n(2),c=n(1),s=n(4),u=n(5);Object.prototype.hasOwnProperty.call(u,"a")&&Object.defineProperty(t,"RpcClient",{configurable:!1,enumerable:!0,get:function(){return u.a}}),Object.prototype.hasOwnProperty.call(r,"a")&&Object.defineProperty(t,"AjaxLayer",{configurable:!1,enumerable:!0,get:function(){return r.a}}),Object.prototype.hasOwnProperty.call(o,"a")&&Object.defineProperty(t,"LogLayer",{configurable:!1,enumerable:!0,get:function(){return o.a}}),Object.prototype.hasOwnProperty.call(a,"a")&&Object.defineProperty(t,"JsonLayer",{configurable:!1,enumerable:!0,get:function(){return a.a}}),Object.prototype.hasOwnProperty.call(c,"a")&&Object.defineProperty(t,"HookLayer",{configurable:!1,enumerable:!0,get:function(){return c.a}}),Object.prototype.hasOwnProperty.call(s,"a")&&Object.defineProperty(t,"ProtocolLayer",{configurable:!1,enumerable:!0,get:function(){return s.a}})}])});
//# sourceMappingURL=rpc_client.js.map