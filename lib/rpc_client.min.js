!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("rpc_client",[],t):"object"==typeof exports?exports.rpc_client=t():n.rpc_client=t()}(this,function(){return function(n){function t(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return n[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var e={};return t.m=n,t.c=e,t.i=function(n){return n},t.d=function(n,t,e){Object.defineProperty(n,t,{configurable:!1,enumerable:!0,get:e})},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s=11)}([function(n,t,e){"use strict";function r(n){this.send=function(t){return new Promise(function(e,r){try{var o=JSON.stringify(t);n.send(o).then(function(n){try{var t=JSON.parse(n)}catch(o){r({name:"JsonLayerError",message:o.name+": "+o.message+"\n"+n,code:1})}e(t)},r)}catch(a){r({name:"JsonLayerError",message:a.name+": "+a.message,code:1})}})}}t.a=r},function(n,t,e){"use strict";function r(n,t,e,r){this.send=function(o){var a,s;if(t)for(a=0;a<o.length;a++)s=o[a],t("call["+a+"]",s[0]+"->"+s[1]+"("+(s[2]&&s[2].join(", ")||"")+")");var u=n.send(o);if(e||r)for(a=0;a<u.length;a++)!function(n){u[n].then(function(t){return e&&e("result["+n+"]",t),t},function(t){var o=r||e;o&&o("error["+n+"]",t)})}(a);return u}}t.a=r},function(n,t,e){"use strict";function r(n){if("object"!=typeof n)throw{name:"RpcProtocolError",message:"Bad response format: object expected, got "+typeof n,code:1};if(void 0===n.status)throw{name:"RpcProtocolError",message:"no status",code:1};if(void 0===n.result)throw{name:"RpcProtocolError",message:"no result",code:1};if(!n.status)throw{name:n.result.type||"UnknownError",message:n.result.message||"",code:n.result.code||0};return n.result}function o(n){var t=1;this.send=function(e){var o,a,s=new Array(e.length),u=[];if(e.length>0){var c=new Array(e.length);for(o=0;o<e.length;o++)a=e[o],c[o]={service:a[0],method:a[1]},a[2]&&a[2].length>0&&(c[o].parameters=a[2]),s[o]=new Promise(function(n,t){u.push([n,t])});var i={id:t++,calls:c};n.send(i).then(function(n){try{var t=r(n);for(o=0;o<u.length;o++)try{var e=r(t[o]);u[o][0](e)}catch(a){u[o][1](a)}}catch(a){for(o=0;o<u.length;o++)u[o][1](a)}},function(n){for(o=0;o<u.length;o++)u[o][1](n)})}return s}}t.a=o},function(n,t,e){"use strict";function r(n){var t=this;t.call=function(t,e,r){return n.send([[t,e,r]])[0]},t.batch=function(t){var e=new o.a,a=new r(e);return t(a),e.flush(n)}}var o=e(10);t.a=r},function(n,t,e){"use strict";function r(n,t,e){this.send=function(r){return new Promise(function(o,a){var s=new XMLHttpRequest;s.open("POST",n,!0),s.withCredentials=!0,t&&t(s),s.onload=function(){e&&e(s,!0),this.status>=200&&this.status<300?o(s.response):a({status:this.status,statusText:s.statusText})},s.onerror=function(){e&&e(s,!1),a({status:this.status,statusText:s.statusText})},s.send(r)})}}t.a=r},function(n,t,e){"use strict";function r(n,t,e){var r=new c.a(n,t),i=new a.a(r),f=new s.a(i),l=e&&e.log||{},h=new o.a(f,l.request,l.response,l.error);return new u.a(h)}var o=e(1),a=e(0),s=e(2),u=e(3),c=e(6);t.a=r},function(n,t,e){"use strict";function r(n,t){this.send=function(e){return new Promise(function(r,o){var a={method:"POST",uri:n,body:e,jar:!0};t(a,function(n,t,e){var a=t&&t.statusCode;!n&&a>=200&&300>a?r(e):o({status:a,error:n})})})}}t.a=r},function(n,t,r){"use strict";function o(n,t){function o(n){return new Promise(function(t,r){i("explorer","getServicesInfo",[n]).then(function(a){var s=[];a.forEach(function(t){if(t.container){var r=n?n+"/"+e.name:t.name;s.push(o(r))}else s.push(t)}),Promise.all(s).then(function(e){t({name:n,container:!0,items:e})},r)})})}function s(n,t,e){var r="";return r+=e+"/**\n",r+=e+" * @constructor\n",r+=e+" */\n",r+=e+"function "+n+"(call, servicePath){\n",t.methods.forEach(function(n){r+="\n";var t=n.params.join(", ");r+=e+"	/**\n",r+=e+"	 * @return {Promise}\n",r+=e+"	 */\n",r+=e+"	this."+n.name+" = function("+t+"){\n",r+=e+"		return call(servicePath, '"+n.name+"', ["+t+"]);\n",r+=e+"	};\n"}),r+=e+"}\n"}function u(n,t,e,r){var o="",a=[];return o+=e+"/**\n",o+=e+" * @constructor\n",o+=e+" */\n",o+=e+"function "+n+"(call){\n",t.items.forEach(function(n){var t,c=n.name[0].toUpperCase()+n.name.substr(1),i=n.name,f=r?r+"/"+n.name:n.name;n.container?(o+="\n"+u(c,n,e+"	",f),t=e+"	this."+i+" = new "+c+"(call);\n"):(o+="\n"+s(c,n,e+"	"),t=e+"	this."+i+" = new "+c+"(call, '"+f+"');\n"),a.push(t)}),o+="\n"+a.join("")+"\n",o+=e+"}\n"}var c=console.log.bind(console),i=r.i(a.a)(n,t,{log:{error:c}}).call;this.generate=function(n,t){return o(t||null).then(function(t){var e=u(n,t,"");return"// GENERATED CODE\n\n"+e+"\nexport default "+n+";\n"},c)}}var a=r(5);t.a=o},function(n,t,e){"use strict";function r(n,t){var e=t&&t.http||{},r=new o.a(n,e.pre_request,e.post_request),i=new s.a(r),f=new u.a(i),l=t&&t.log||{},h=new a.a(f,l.request,l.response,l.error);return new c.a(h)}var o=e(4),a=e(1),s=e(0),u=e(2),c=e(3);t.a=r},function(n,t,e){"use strict";function r(n,t,e){this.send=function(r){r=t?t(r):r;var o=n.send(r);return e?e(o):o}}t.a=r},function(n,t,e){"use strict";function r(){var n,t=this,e=[],r=[];t.send=function(t){var o=new Array(t.length);for(e=e.concat(t),n=0;n<t.length;n++)o[n]=new Promise(function(n,t){r.push([n,t])});return o},t.flush=function(n){for(var t=n.send(e),o=0;o<r.length;o++)t[o].then(r[o][0],r[o][1]);return t}}t.a=r},function(n,t,e){"use strict";var r=e(4),o=e(1),a=e(0),s=e(9),u=e(2),c=e(3),i=e(6),f=e(5),l=e(8),h=e(7);e.o(h,"a")&&e.d(t,"ApiGenerator",function(){return h.a}),e.o(r,"a")&&e.d(t,"AjaxLayer",function(){return r.a}),e.o(o,"a")&&e.d(t,"LogLayer",function(){return o.a}),e.o(a,"a")&&e.d(t,"JsonLayer",function(){return a.a}),e.o(s,"a")&&e.d(t,"HookLayer",function(){return s.a}),e.o(u,"a")&&e.d(t,"ProtocolLayer",function(){return u.a}),e.o(c,"a")&&e.d(t,"RpcClient",function(){return c.a}),e.o(i,"a")&&e.d(t,"RequestLayer",function(){return i.a}),e.o(f,"a")&&e.d(t,"CreateNodeRpcClient",function(){return f.a}),e.o(l,"a")&&e.d(t,"CreateBrowserRpcClient",function(){return l.a})}])});
//# sourceMappingURL=rpc_client.min.js.map