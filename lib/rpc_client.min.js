!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("request")):"function"==typeof define&&define.amd?define("rpc_client",["request"],e):"object"==typeof exports?exports.rpc_client=e(require("request")):t.rpc_client=e(t.request)}(this,function(t){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,e,n){Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=8)}([function(t,e,n){"use strict";function r(t,e,n){this.send=function(r){return new Promise(function(o,s){var u=new XMLHttpRequest;u.open("POST",t,!0),u.withCredentials=!0,e&&e(u),u.onload=function(){n&&n(u,!0),this.status>=200&&this.status<300?o(u.response):s({status:this.status,statusText:u.statusText})},u.onerror=function(){n&&n(u,!1),s({status:this.status,statusText:u.statusText})},u.send(r)})}}e.a=r},function(t,e,n){"use strict";function r(t,e,n){this.send=function(r){r=e?e(r):r;var o=t.send(r);return n?n(o):o}}e.a=r},function(t,e,n){"use strict";function r(t){this.send=function(e){return new Promise(function(n,r){try{var o=JSON.stringify(e);t.send(o).then(function(t){try{var e=JSON.parse(t)}catch(o){r({name:"JsonLayerError",message:o.name+": "+o.message+"\n"+t,code:1})}n(e)},r)}catch(s){r({name:"JsonLayerError",message:s.name+": "+s.message,code:1})}})}}e.a=r},function(t,e,n){"use strict";function r(t,e,n,r){this.send=function(o){var s,u;if(e)for(s=0;s<o.length;s++)u=o[s],e("call["+s+"]",u[0]+"->"+u[1]+"("+(u[2]&&u[2].join(", ")||"")+")");var a=t.send(o);if(n||r)for(s=0;s<a.length;s++)!function(t){a[t].then(function(e){return n&&n("result["+t+"]",e),e},function(e){var o=r||n;o&&o("error["+t+"]",e)})}(s);return a}}e.a=r},function(t,e,n){"use strict";function r(t){if("object"!=typeof t)throw{name:"RpcProtocolError",message:"Bad response format: object expected, got "+typeof t,code:1};if(void 0===t.status)throw{name:"RpcProtocolError",message:"no status",code:1};if(void 0===t.result)throw{name:"RpcProtocolError",message:"no result",code:1};if(!t.status)throw{name:t.result.type||"UnknownError",message:t.result.message||"",code:t.result.code||0};return t.result}function o(t){var e=1;this.send=function(n){var o,s,u=new Array(n.length),a=[];if(n.length>0){var i=new Array(n.length);for(o=0;o<n.length;o++)s=n[o],i[o]={service:s[0],method:s[1]},s[2]&&s[2].length>0&&(i[o].parameters=s[2]),u[o]=new Promise(function(t,e){a.push([t,e])});var c={id:e++,calls:i};t.send(c).then(function(t){try{var e=r(t);for(o=0;o<a.length;o++)try{var n=r(e[o]);a[o][0](n)}catch(s){a[o][1](s)}}catch(s){for(o=0;o<a.length;o++)a[o][1](s)}},function(t){for(o=0;o<a.length;o++)a[o][1](t)})}return u}}e.a=o},function(t,e,n){"use strict";function r(t,e,n){this.send=function(r){return new Promise(function(o,u){var a={method:"POST",uri:t,body:r,jar:!0};e&&e(a),s()(a,function(t,e,r){var s=e.statusCode;!t&&s>=200&&300>s?(n&&n(e,!0),o(r)):(n&&n(e,!1),u({status:s,error:t}))})})}}var o=n(9),s=o&&o.__esModule?function(){return o["default"]}:function(){return o};n.d(s,"a",s),e.a=r},function(t,e,n){"use strict";function r(t){var e=this;e.call=function(e,n,r){return t.send([[e,n,r]])[0]},e.batch=function(e){var n=new o.a,s=new r(n);return e(s),n.flush(t)}}var o=n(7);e.a=r},function(t,e,n){"use strict";function r(){var t,e=this,n=[],r=[];e.send=function(e){var o=new Array(e.length);for(n=n.concat(e),t=0;t<e.length;t++)o[t]=new Promise(function(t,e){r.push([t,e])});return o},e.flush=function(t){for(var e=t.send(n),o=0;o<r.length;o++)e[o].then(r[o][0],r[o][1]);return e}}e.a=r},function(t,e,n){"use strict";function r(t,e){var n=e&&e.http||{},r=new l.a(t,n.pre_request,n.post_request),o=new a.a(r),s=new c.a(o),i=e&&e.log||{},d=new u.a(s,i.request,i.response,i.error);return new f.a(d)}function o(t,e){var n=e&&e.http||{},r=new s.a(t,n.pre_request,n.post_request),o=new a.a(r),i=new c.a(o),l=e&&e.log||{},d=new u.a(i,l.request,l.response,l.error);return new f.a(d)}var s=n(0),u=n(3),a=n(2),i=n(1),c=n(4),f=n(6),l=n(5);n.d(e,"CreateBrowserRpcClient",function(){return o}),n.d(e,"CreateNodeRpcClient",function(){return r}),n.o(s,"a")&&n.d(e,"AjaxLayer",function(){return s.a}),n.o(u,"a")&&n.d(e,"LogLayer",function(){return u.a}),n.o(i,"a")&&n.d(e,"HookLayer",function(){return i.a}),n.o(c,"a")&&n.d(e,"ProtocolLayer",function(){return c.a}),n.o(f,"a")&&n.d(e,"RpcClient",function(){return f.a}),n.o(l,"a")&&n.d(e,"RequestLayer",function(){return l.a}),n.o(a,"a")&&n.d(e,"JsonLayer",function(){return a.a})},function(e,n){e.exports=t}])});
//# sourceMappingURL=rpc_client.min.js.map