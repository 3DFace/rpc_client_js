!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("rpc_client",[],t):"object"==typeof exports?exports.rpc_client=t():n.rpc_client=t()}(this,function(){return function(n){function t(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return n[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var e={};return t.m=n,t.c=e,t.i=function(n){return n},t.d=function(n,t,e){Object.defineProperty(n,t,{configurable:!1,enumerable:!0,get:e})},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s=11)}([function(n,t,e){"use strict";function r(n,t){this.send=function(e){return t(e,n)}}t.a=r},function(n,t,e){"use strict";function r(n){this.send=function(t){return new Promise(function(e,r){try{var o=JSON.stringify(t);n.send(o).then(function(n){try{var t=JSON.parse(n)}catch(o){r({name:"JsonLayerError",message:o.name+": "+o.message+"\n"+n,code:1})}e(t)},r)}catch(a){r({name:"JsonLayerError",message:a.name+": "+a.message,code:1})}})}}t.a=r},function(n,t,e){"use strict";function r(n,t,e,r){this.send=function(o){var a,u;if(t)for(a=0;a<o.length;a++)u=o[a],t("call["+a+"]",u[0]+"->"+u[1]+"("+(u[2]&&u[2].join(", ")||"")+")");var s=n.send(o);if(e||r)for(a=0;a<s.length;a++)!function(n){s[n].then(function(t){return e&&e("result["+n+"]",t),t},function(t){var o=r||e;o&&o("error["+n+"]",t)})}(a);return s}}t.a=r},function(n,t,e){"use strict";function r(n){if("object"!=typeof n)throw{name:"RpcProtocolError",message:"Bad response format: object expected, got "+typeof n,code:1};if(void 0===n.status)throw{name:"RpcProtocolError",message:"no status",code:1};if(void 0===n.result)throw{name:"RpcProtocolError",message:"no result",code:1};if(!n.status)throw{name:n.result.type||"UnknownError",message:n.result.message||"",code:n.result.code||0};return n.result}function o(n){var t=1;this.send=function(e){var o,a,u=new Array(e.length),s=[];if(e.length>0){var i=new Array(e.length);for(o=0;o<e.length;o++)a=e[o],i[o]={service:a[0],method:a[1]},a[2]&&a[2].length>0&&(i[o].parameters=a[2]),u[o]=new Promise(function(n,t){s.push([n,t])});var c={id:t++,calls:i};n.send(c).then(function(n){try{var t=r(n);for(o=0;o<s.length;o++)try{var e=r(t[o]);s[o][0](e)}catch(a){s[o][1](a)}}catch(a){for(o=0;o<s.length;o++)s[o][1](a)}},function(n){for(o=0;o<s.length;o++)s[o][1](n)})}return u}}t.a=o},function(n,t,e){"use strict";function r(n){var t=this;t.call=function(t,e,r){return n.send([[t,e,r]])[0]},t.batch=function(t){var e=new o.a,a=new r(e);t(a);var u=e.flush(n);return new Promise(function(n){function t(){--e||n()}var e=u.length;u.forEach(function(n){n.then(t,t)})})}}var o=e(10);t.a=r},function(n,t,e){"use strict";function r(n,t,e){this.send=function(r){return new Promise(function(o,a){var u=new XMLHttpRequest;u.open("POST",n,!0),u.withCredentials=!0,t&&t(u),u.onload=function(){e&&e(u,!0),this.status>=200&&this.status<300?o(u.response):a({status:this.status,statusText:u.statusText})},u.onerror=function(){e&&e(u,!1),a({status:this.status,statusText:u.statusText})},u.send(r)})}}t.a=r},function(n,t,e){"use strict";function r(n,t,e){var r=new c.a(n,t),f=new a.a(r),l=new u.a(f),h=e&&e.log||{},p=new o.a(l,h.request,h.response,h.error),d=e.hook?new i.a(p,e.hook):p;return new s.a(d)}var o=e(2),a=e(1),u=e(3),s=e(4),i=e(0),c=e(7);t.a=r},function(n,t,e){"use strict";function r(n,t){this.send=function(e){return new Promise(function(r,o){var a={method:"POST",uri:n,body:e,jar:!0};t(a,function(n,t,e){var a=t&&t.statusCode;!n&&a>=200&&300>a?r(e):o({status:a,error:n})})})}}t.a=r},function(n,t,r){"use strict";function o(n,t){function o(n){return new Promise(function(t,r){f("explorer","getServicesInfo",[n]).then(function(a){var u=[];a.forEach(function(t){if(t.container){var r=n?n+"/"+e.name:t.name;u.push(o(r))}else u.push(t)}),Promise.all(u).then(function(e){t({name:n,container:!0,items:e})},r)})})}function u(n,t,e,r){var o="";return o+=e+"/**\n",o+=e+" * @constructor\n",o+=e+" */\n",o+=e+"function "+n+"(call){\n\n",o+=e+"	var servicePath = '"+r+"';\n",t.methods.forEach(function(n){o+="\n";var t=n.params.join(", ");o+=e+"	/**\n",o+=e+"	 * @return {Promise}\n",o+=e+"	 */\n",o+=e+"	this."+n.name+" = function("+t+"){\n",o+=e+"		return call(servicePath, '"+n.name+"', ["+t+"]);\n",o+=e+"	};\n"}),o+=e+"}\n"}function s(n,t,e,r){var o="";return o+=e+"/**\n",o+=e+" * @constructor\n",o+=e+" */\n",o+=e+"function "+n+"(call){\n",t.items.forEach(function(n){var t=n.name[0].toUpperCase()+n.name.substr(1),a=n.name,u=r?r+"/"+n.name:n.name;o+="\n"+i(t,n,e+"	",u),o+="\n"+e+"	this."+a+" = new "+t+"(call);\n"}),o+=e+"}\n"}function i(n,t,e,r){return t.container?s(n,t,e,r):u(n,t,e,r)}var c=console.log.bind(console),f=r.i(a.a)(n,t,{log:{request:c,error:c}}).call;this.generate=function(n,t){var e,r;if(t){var a=t.split("/");r=a.pop(),e=a.join("/")}else e=null,r=null;return o(e).then(function(e){var o;o=r?e.items.find(function(n){return n.name==r}):e;var a=i(n,o,"",t);return"// GENERATED CODE\n\n"+a+"\nexport default "+n+";\n"},c)}}var a=r(6);t.a=o},function(n,t,e){"use strict";function r(n,t){var e=t&&t.http||{},r=new o.a(n,e.pre_request,e.post_request),f=new u.a(r),l=new s.a(f),h=t&&t.log||{},p=new a.a(l,h.request,h.response,h.error),d=t.hook?new i.a(p,t.hook):p;return new c.a(d)}var o=e(5),a=e(2),u=e(1),s=e(3),i=e(0),c=e(4);t.a=r},function(n,t,e){"use strict";function r(){var n,t=this,e=[],r=[];t.send=function(t){var o=new Array(t.length);for(e=e.concat(t),n=0;n<t.length;n++)o[n]=new Promise(function(n,t){r.push([n,t])});return o},t.flush=function(n){for(var t=n.send(e),o=0;o<r.length;o++)t[o].then(r[o][0],r[o][1]);return t}}t.a=r},function(n,t,e){"use strict";var r=e(5),o=e(2),a=e(1),u=e(0),s=e(3),i=e(4),c=e(7),f=e(6),l=e(9),h=e(8);e.o(h,"a")&&e.d(t,"ApiGenerator",function(){return h.a}),e.o(r,"a")&&e.d(t,"AjaxLayer",function(){return r.a}),e.o(o,"a")&&e.d(t,"LogLayer",function(){return o.a}),e.o(a,"a")&&e.d(t,"JsonLayer",function(){return a.a}),e.o(u,"a")&&e.d(t,"HookLayer",function(){return u.a}),e.o(s,"a")&&e.d(t,"ProtocolLayer",function(){return s.a}),e.o(i,"a")&&e.d(t,"RpcClient",function(){return i.a}),e.o(c,"a")&&e.d(t,"RequestLayer",function(){return c.a}),e.o(f,"a")&&e.d(t,"CreateNodeRpcClient",function(){return f.a}),e.o(l,"a")&&e.d(t,"CreateBrowserRpcClient",function(){return l.a})}])});
//# sourceMappingURL=rpc_client.min.js.map