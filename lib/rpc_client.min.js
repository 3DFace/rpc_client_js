!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("fs"),require("request")):"function"==typeof define&&define.amd?define("rpc_client",["fs","request"],t):"object"==typeof exports?exports.rpc_client=t(require("fs"),require("request")):n.rpc_client=t(n.fs,n.request)}(this,function(n,t){return function(n){function t(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return n[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var e={};return t.m=n,t.c=e,t.i=function(n){return n},t.d=function(n,t,e){Object.defineProperty(n,t,{configurable:!1,enumerable:!0,get:e})},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s=11)}([function(n,t,e){"use strict";function r(n){this.send=function(t){return new Promise(function(e,r){try{var o=JSON.stringify(t);n.send(o).then(function(n){try{var t=JSON.parse(n)}catch(o){r({name:"JsonLayerError",message:o.name+": "+o.message+"\n"+n,code:1})}e(t)},r)}catch(u){r({name:"JsonLayerError",message:u.name+": "+u.message,code:1})}})}}t.a=r},function(n,t,e){"use strict";function r(n,t,e,r){this.send=function(o){var u,s;if(t)for(u=0;u<o.length;u++)s=o[u],t("call["+u+"]",s[0]+"->"+s[1]+"("+(s[2]&&s[2].join(", ")||"")+")");var a=n.send(o);if(e||r)for(u=0;u<a.length;u++)!function(n){a[n].then(function(t){return e&&e("result["+n+"]",t),t},function(t){var o=r||e;o&&o("error["+n+"]",t)})}(u);return a}}t.a=r},function(n,t,e){"use strict";function r(n){if("object"!=typeof n)throw{name:"RpcProtocolError",message:"Bad response format: object expected, got "+typeof n,code:1};if(void 0===n.status)throw{name:"RpcProtocolError",message:"no status",code:1};if(void 0===n.result)throw{name:"RpcProtocolError",message:"no result",code:1};if(!n.status)throw{name:n.result.type||"UnknownError",message:n.result.message||"",code:n.result.code||0};return n.result}function o(n){var t=1;this.send=function(e){var o,u,s=new Array(e.length),a=[];if(e.length>0){var i=new Array(e.length);for(o=0;o<e.length;o++)u=e[o],i[o]={service:u[0],method:u[1]},u[2]&&u[2].length>0&&(i[o].parameters=u[2]),s[o]=new Promise(function(n,t){a.push([n,t])});var c={id:t++,calls:i};n.send(c).then(function(n){try{var t=r(n);for(o=0;o<a.length;o++)try{var e=r(t[o]);a[o][0](e)}catch(u){a[o][1](u)}}catch(u){for(o=0;o<a.length;o++)a[o][1](u)}},function(n){for(o=0;o<a.length;o++)a[o][1](n)})}return s}}t.a=o},function(n,t,e){"use strict";function r(n){var t=this;t.call=function(t,e,r){return n.send([[t,e,r]])[0]},t.batch=function(t){var e=new o.a,u=new r(e);return t(u),e.flush(n)}}var o=e(10);t.a=r},function(n,t,e){"use strict";function r(n,t,e){this.send=function(r){return new Promise(function(o,u){var s=new XMLHttpRequest;s.open("POST",n,!0),s.withCredentials=!0,t&&t(s),s.onload=function(){e&&e(s,!0),this.status>=200&&this.status<300?o(s.response):u({status:this.status,statusText:s.statusText})},s.onerror=function(){e&&e(s,!1),u({status:this.status,statusText:s.statusText})},s.send(r)})}}t.a=r},function(n,t,e){"use strict";function r(n,t){var e=t&&t.http||{},r=new i.a(n,e.pre_request,e.post_request),c=new u.a(r),f=new s.a(c),l=t&&t.log||{},h=new o.a(f,l.request,l.response,l.error);return new a.a(h)}var o=e(1),u=e(0),s=e(2),a=e(3),i=e(6);t.a=r},function(n,t,e){"use strict";function r(n,t,e){this.send=function(r){return new Promise(function(o,s){var a={method:"POST",uri:n,body:r,jar:!0};t&&t(a),u()(a,function(n,t,r){var u=t.statusCode;!n&&u>=200&&300>u?(e&&e(t,!0),o(r)):(e&&e(t,!1),s({status:u,error:n}))})})}}var o=e(13),u=o&&o.__esModule?function(){return o["default"]}:function(){return o};e.d(u,"a",u),t.a=r},function(n,t,r){"use strict";function o(n){function t(n){return new Promise(function(r,o){c("explorer","getServicesInfo",[n]).then(function(u){var s=[];u.forEach(function(r){if(r.container){var o=n?n+"/"+e.name:r.name;s.push(t(o))}else s.push(r)}),Promise.all(s).then(function(t){r({name:n,container:!0,items:t})},o)})})}function o(n,t,e){var r="";return r+=e+"/**\n",r+=e+" * @constructor\n",r+=e+" */\n",r+=e+"function "+n+"(call, servicePath){\n",t.methods.forEach(function(n){r+="\n";var t=n.params.join(", ");r+=e+"	/**\n",r+=e+"	 * @return {Promise}\n",r+=e+"	 */\n",r+=e+"	this."+n.name+" = function("+t+"){\n",r+=e+"		return call(servicePath, '"+n.name+"', ["+t+"]);\n",r+=e+"	};\n"}),r+=e+"}\n"}function u(n,t,e,r){var s="",a=[];return s+=e+"/**\n",s+=e+" * @constructor\n",s+=e+" */\n",s+=e+"function "+n+"(call){\n",t.items.forEach(function(n){var t,i=n.name[0].toUpperCase()+n.name.substr(1),c=n.name,f=r?r+"/"+n.name:n.name;n.container?(s+="\n"+u(i,n,e+"	",f),t=e+"	this."+c+" = new "+i+"(call);\n"):(s+="\n"+o(i,n,e+"	"),t=e+"	this."+c+" = new "+i+"(call, '"+f+"');\n"),a.push(t)}),s+="\n"+a.join("")+"\n",s+=e+"}\n"}var i=console.log.bind(console),c=r.i(a.a)(n,{log:{error:i}}).call;this.generate=function(n,e,r){t(e||null).then(function(t){var e=u(n,t,""),o="// GENERATED CODE\n\n"+e+"\nexport default "+n+";\n";s.a.writeFile((r||"")+n+".js",o,i)},i)}}var u=r(12),s=u&&u.__esModule?function(){return u["default"]}:function(){return u};r.d(s,"a",s);var a=r(5);t.a=o},function(n,t,e){"use strict";function r(n,t){var e=t&&t.http||{},r=new o.a(n,e.pre_request,e.post_request),c=new s.a(r),f=new a.a(c),l=t&&t.log||{},h=new u.a(f,l.request,l.response,l.error);return new i.a(h)}var o=e(4),u=e(1),s=e(0),a=e(2),i=e(3);t.a=r},function(n,t,e){"use strict";function r(n,t,e){this.send=function(r){r=t?t(r):r;var o=n.send(r);return e?e(o):o}}t.a=r},function(n,t,e){"use strict";function r(){var n,t=this,e=[],r=[];t.send=function(t){var o=new Array(t.length);for(e=e.concat(t),n=0;n<t.length;n++)o[n]=new Promise(function(n,t){r.push([n,t])});return o},t.flush=function(n){for(var t=n.send(e),o=0;o<r.length;o++)t[o].then(r[o][0],r[o][1]);return t}}t.a=r},function(n,t,e){"use strict";var r=e(4),o=e(1),u=e(0),s=e(9),a=e(2),i=e(3),c=e(6),f=e(5),l=e(8),h=e(7);e.o(h,"a")&&e.d(t,"ApiGenerator",function(){return h.a}),e.o(r,"a")&&e.d(t,"AjaxLayer",function(){return r.a}),e.o(o,"a")&&e.d(t,"LogLayer",function(){return o.a}),e.o(u,"a")&&e.d(t,"JsonLayer",function(){return u.a}),e.o(s,"a")&&e.d(t,"HookLayer",function(){return s.a}),e.o(a,"a")&&e.d(t,"ProtocolLayer",function(){return a.a}),e.o(i,"a")&&e.d(t,"RpcClient",function(){return i.a}),e.o(c,"a")&&e.d(t,"RequestLayer",function(){return c.a}),e.o(f,"a")&&e.d(t,"CreateNodeRpcClient",function(){return f.a}),e.o(l,"a")&&e.d(t,"CreateBrowserRpcClient",function(){return l.a})},function(t,e){t.exports=n},function(n,e){n.exports=t}])});
//# sourceMappingURL=rpc_client.min.js.map